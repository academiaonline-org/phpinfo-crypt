################################################################################
#      Copyright (C) 2020        Sebastian Francisco Colomar Bauza             #
#      SPDX-License-Identifier:  GPL-2.0-only                                  #
################################################################################
ARG                                                                            \
  digest="@sha256:074d3636ebda6dd446d0d00304c4454f468237fdacf08fb0eeac90bdbfa1bac7"
ARG                                                                            \
  image="alpine"
ARG                                                                            \
  tag="3.12.3"
################################################################################
FROM                                                                           \
  ${image}:${tag}${digest}                                                     \
  AS                                                                           \
  production
################################################################################
ARG                                                                            \
  dir=/app
ARG                                                                            \
  src=/src
WORKDIR                                                                        \
  ${dir}
COPY                                                                           \
  ${src}                                                                       \
  .
RUN                                                                            \
  apk add --upgrade php                                                        \
                                                                               ;
################################################################################
ENTRYPOINT                                                                     \
  ["php"]
CMD                                                                            \
  ["-f","index.php","-S","0.0.0.0:8080"]
################################################################################
EXPOSE                                                                         \
  8080
################################################################################
